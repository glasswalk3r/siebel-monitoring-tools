#summary description of the Nagios plugins available

= Introduction =

Nagios plug-ins are part of this project and they will be documented in this page, regarding functionality and how to configure them.

== Siebel Components Monitoring ==

This is the first released plug-in for Nagios: the components of a Siebel server can be monitored by it. The plug-in will work execute the following operations in sequence after is invoked by Nagios (directly or indirectly):

  # read a XML configuration file;
  # connect to the Siebel server with `srvrmgr` program;
  # list all components configured in the Server;
  # compare the components states with the expected ones read from the XML configuration file;
  # return the comparison as a format understood by Nagios;

=== Configuration ===

The plug-in itself is a Perl script that can be executed, inclusive, from a command file. While the plug-in reads a XML configuration file, not all of it's parameters are taken from this file and need edition to have the correct values to connect to a Siebel server with the `srvrmgr` program.

While editing the Perl script, please change only the values shown below:

{{{
# configuration of the plugin

# the Siebel Server name to connect
my $siebel_server = 'foobar';

# the path to the srvrmgr program. Do not include the executable
my $srvrmgr_path = 'path_to';

# the executable name of srvrmgr
my $srvrmgr_exec = 'srvrmgr.exe';

# the Siebel Enterprise to connect to
my $siebel_ent = 'foo';

# the login to use for authentication. The login must have the correct visibility
my $user = 'sadmin';

# the login password
my $password = 'foobar';

# the Siebel Gateway to connect to
my $siebel_gat = 'foobar';
}}}

Having to edit the Perl script is far from ideal and this should be changed in future releases to the XML configuration file.

The XML configuration file looks like this:

{{{
<?xml version="1.0" encoding="UTF-8"?>
<servers>
  <server name="foobar">
    <components>
      <component name="TxnProc" description="Transaction Processor" ComponentGroup="Remote" OKStatus="Executing" criticality="5"/>
      <component name="WorkActn" description="Workflow Action Agent" ComponentGroup="Workflow" criticality="1"/>
      <component name="WorkMon" description="Workflow Monitor Agent" ComponentGroup="Workflow" criticality="1"/>
      <component name="WfProcBatchMgr" description="Workflow Process Batch Manager" ComponentGroup="Workflow" criticality="1"/>
      <component name="WfProcMgr" description="Workflow Process Manager" ComponentGroup="Workflow" criticality="5"/>
    </components>
    <componentsGroups>
      <componentGroup name="Workflow" defaultOKStatus="Executing|Activated"/>
    </componentsGroups>
  </server>
</servers>
}}}

Each component description includes:

  * name: the component alias, as retrieve from `list comp` command on `srvrmgr`;
  * description: the description field from `list comp` command on `srvrmgr`;
  * OKStatus: the expected status for the component, as returned by the `list comp` command. It is possible to include multiple values, separated by a pipe character ("|");
  * !ComponentGroup: the component group that the component is part of, as from `list comp` command on `srvrmgr`. This configuration is optional and may be used as a shortcut to identify globally which are the expected status for the component;
  * criticality: a integer value that identifies how much it is critical for the server if the component does not have the expected status. This value will be used to calculate the threshold of the plug-in to issue a _WARNING_ or a _CRITICAL_ in Nagios.

Basically, at the end of comparison of expected and current states of the components, each component that does not match the expected state will have it's _criticality_ property summed to others. If the result is zero, it means that all components are running as expected. If not, the thresholds defined when executing the plug-in will define which type of notification will be used.

You can create as many as necessary components definitions in the XML file.

=== Running/testing the plug-in ===

The plug-in expected command lines parameter. This is the output if no argument is given:

{{{
jackal@yggdrasil$ perl comp_mon.pl
Usage: comp_mon.pl -w -c -f

Missing argument: warning
Missing argument: critical
Missing argument: configuration
}}}

These are the minimal command line options expected. The `--warning` and `--critical` are the thresholds to define how the plug-in should generated output to Nagios. In doubt, use as shown below:

{{{
perl comp_mon.pl --warning=0 --critical=4 --configuration=/etc/comp_mon.xml
}}}

There is a on-line help too, if the plug-in is invoked with `--help` argument:

{{{
jackal@yggdrasil$ perl comp_mon.pl --help
comp_mon.pl 0.1

This nagios plugin is free software, and comes with ABSOLUTELY NO WARRANTY. 
It may be used, redistributed and/or modified under the terms of the GNU 
General Public Licence (see http://www.fsf.org/licensing/licenses/gpl.txt).

Usage: comp_mon.pl -w -c -f

 -?, --usage
   Print usage information
 -h, --help
   Print detailed help screen
 -V, --version
   Print version information
 --extra-opts=[section][@file]
   Read options from an ini file. See http://nagiosplugins.org/extra-opts
   for usage and examples.
 -w, --warning=INTEGER. Warning if warning threshold is higher than INTEGER
 -c, --critical=INTEGER. Critical if critical threshold is higher than INTEGER
 -f, --configuration=PATH
 -t, --timeout=INTEGER
   Seconds before plugin times out (default: 15)
 -v, --verbose
   Show details for command-line debugging (can repeat up to 3 times)
}}}

=== Nagios configuration ===

Please refer to Nagios configuration to know how configure the server to monitor the components of a Siebel environment.

=== Screen shots===

Below there are some screen-shots taken from the Nagios screens showing information generated by the plug-in in action.

*Services being monitored in a server:*

http://siebel-monitoring-tools.googlecode.com/files/Nagios%20Core%20-%20Mozilla%20Firefox_2012-06-26_12-32-58.png

*Service information (of the plug-in)*:

http://siebel-monitoring-tools.googlecode.com/files/Nagios%20Core%20-%20Mozilla%20Firefox_2012-06-26_12-34-16.png

*Log of contact notifications for the plug-in:*

http://siebel-monitoring-tools.googlecode.com/files/Nagios%20Core%20-%20Mozilla%20Firefox_2012-06-26_12-35-55.png